---
import { getCollection } from "astro:content";

import BlogPost from "@layouts/BlogPost.astro";
import BlogListEntry from "@components/BlogListEntry.astro";

const posts = await getCollection("blog");
// Make sure most recent post appears first
posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BlogPost
  frontmatter={{
    title: "Blog",
    description: "Browse the blog posts written by Matthew Sanetra",
  }}
>
  <h1>Blog</h1>
  <div class="not-prose">
    <ol class="list-none">
      {
        posts.map((post) => (
          <li>
            <BlogListEntry {...post.data} link={`/blog/${post.slug}/`} />
          </li>
        ))
      }
    </ol>
  </div>
</BlogPost>
